{"ast":null,"code":"import React, { useCallback, useEffect, useState } from 'react';\nimport { isChannel } from './utils';\nimport { Avatar } from '../Avatar/Avatar';\nimport { useBreakpoint } from '../Message/hooks/useBreakpoint';\nimport { useTranslationContext } from '../../context/TranslationContext';\nvar DefaultDropdownContainer = function (props) {\n  var focusedUser = props.focusedUser,\n    results = props.results,\n    _a = props.SearchResultItem,\n    SearchResultItem = _a === void 0 ? DefaultSearchResultItem : _a,\n    selectResult = props.selectResult;\n  return React.createElement(React.Fragment, null, results.map(function (result, index) {\n    return React.createElement(SearchResultItem, {\n      focusedUser: focusedUser,\n      index: index,\n      key: index,\n      result: result,\n      selectResult: selectResult\n    });\n  }));\n};\nvar DefaultSearchResultItem = function (props) {\n  var _a, _b;\n  var focusedUser = props.focusedUser,\n    index = props.index,\n    result = props.result,\n    selectResult = props.selectResult;\n  var focused = focusedUser === index;\n  if (isChannel(result)) {\n    var channel_1 = result;\n    return React.createElement(\"button\", {\n      \"aria-label\": \"Select Channel: \" + (((_a = channel_1.data) === null || _a === void 0 ? void 0 : _a.name) || ''),\n      className: \"str-chat__channel-search-result \" + (focused ? 'focused' : ''),\n      onClick: function () {\n        return selectResult(channel_1);\n      }\n    }, React.createElement(\"div\", {\n      className: 'result-hashtag'\n    }, \"#\"), React.createElement(\"p\", {\n      className: 'channel-search__result-text'\n    }, (_b = channel_1.data) === null || _b === void 0 ? void 0 : _b.name));\n  } else {\n    return React.createElement(\"button\", {\n      \"aria-label\": \"Select User Channel: \" + (result.name || ''),\n      className: \"str-chat__channel-search-result \" + (focused ? 'focused' : ''),\n      onClick: function () {\n        return selectResult(result);\n      }\n    }, React.createElement(Avatar, {\n      image: result.image,\n      user: result\n    }), result.name || result.id);\n  }\n};\nexport var SearchResults = function (props) {\n  var _a = props.DropdownContainer,\n    DropdownContainer = _a === void 0 ? DefaultDropdownContainer : _a,\n    popupResults = props.popupResults,\n    results = props.results,\n    searching = props.searching,\n    SearchEmpty = props.SearchEmpty,\n    SearchResultsHeader = props.SearchResultsHeader,\n    SearchLoading = props.SearchLoading,\n    _b = props.SearchResultItem,\n    SearchResultItem = _b === void 0 ? DefaultSearchResultItem : _b,\n    selectResult = props.selectResult;\n  var t = useTranslationContext('SearchResults').t;\n  var _c = useState(),\n    focusedUser = _c[0],\n    setFocusedUser = _c[1];\n  var device = useBreakpoint().device;\n  var containerStyle = popupResults && device === 'full' ? 'popup' : 'inline';\n  var ResultsContainer = function (_a) {\n    var children = _a.children;\n    return React.createElement(\"div\", {\n      className: \"str-chat__channel-search-container \" + containerStyle\n    }, children);\n  };\n  var handleKeyDown = useCallback(function (event) {\n    if (event.key === 'ArrowUp') {\n      setFocusedUser(function (prevFocused) {\n        if (prevFocused === undefined) return 0;\n        return prevFocused === 0 ? results.length - 1 : prevFocused - 1;\n      });\n    }\n    if (event.key === 'ArrowDown') {\n      setFocusedUser(function (prevFocused) {\n        if (prevFocused === undefined) return 0;\n        return prevFocused === results.length - 1 ? 0 : prevFocused + 1;\n      });\n    }\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      if (focusedUser !== undefined) {\n        selectResult(results[focusedUser]);\n        return setFocusedUser(undefined);\n      }\n    }\n  }, [focusedUser]);\n  useEffect(function () {\n    document.addEventListener('keydown', handleKeyDown, false);\n    return function () {\n      return document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleKeyDown]);\n  if (searching) {\n    return React.createElement(ResultsContainer, null, SearchLoading ? React.createElement(SearchLoading, null) : React.createElement(\"div\", {\n      className: 'str-chat__channel-search-container-searching'\n    }, t('Searching...')));\n  }\n  if (!results.length) {\n    return React.createElement(ResultsContainer, null, SearchEmpty ? React.createElement(SearchEmpty, null) : React.createElement(\"div\", {\n      \"aria-live\": 'polite',\n      className: 'str-chat__channel-search-container-empty'\n    }, t('No results found')));\n  }\n  return React.createElement(ResultsContainer, null, SearchResultsHeader && React.createElement(SearchResultsHeader, null), React.createElement(DropdownContainer, {\n    focusedUser: focusedUser,\n    results: results,\n    SearchResultItem: SearchResultItem,\n    selectResult: selectResult\n  }));\n};","map":{"version":3,"names":["React","useCallback","useEffect","useState","isChannel","Avatar","useBreakpoint","useTranslationContext","DefaultDropdownContainer","props","focusedUser","results","_a","SearchResultItem","DefaultSearchResultItem","selectResult","createElement","Fragment","map","result","index","key","_b","focused","channel_1","data","name","className","onClick","image","user","id","SearchResults","DropdownContainer","popupResults","searching","SearchEmpty","SearchResultsHeader","SearchLoading","t","_c","setFocusedUser","device","containerStyle","ResultsContainer","children","handleKeyDown","event","prevFocused","undefined","length","preventDefault","document","addEventListener","removeEventListener"],"sources":["/home/kingking/Documents/code/website/libreqkn/client/node_modules/stream-chat-react/dist/components/ChannelSearch/SearchResults.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { isChannel } from './utils';\nimport { Avatar } from '../Avatar/Avatar';\nimport { useBreakpoint } from '../Message/hooks/useBreakpoint';\nimport { useTranslationContext } from '../../context/TranslationContext';\nvar DefaultDropdownContainer = function (props) {\n    var focusedUser = props.focusedUser, results = props.results, _a = props.SearchResultItem, SearchResultItem = _a === void 0 ? DefaultSearchResultItem : _a, selectResult = props.selectResult;\n    return (React.createElement(React.Fragment, null, results.map(function (result, index) { return (React.createElement(SearchResultItem, { focusedUser: focusedUser, index: index, key: index, result: result, selectResult: selectResult })); })));\n};\nvar DefaultSearchResultItem = function (props) {\n    var _a, _b;\n    var focusedUser = props.focusedUser, index = props.index, result = props.result, selectResult = props.selectResult;\n    var focused = focusedUser === index;\n    if (isChannel(result)) {\n        var channel_1 = result;\n        return (React.createElement(\"button\", { \"aria-label\": \"Select Channel: \" + (((_a = channel_1.data) === null || _a === void 0 ? void 0 : _a.name) || ''), className: \"str-chat__channel-search-result \" + (focused ? 'focused' : ''), onClick: function () { return selectResult(channel_1); } },\n            React.createElement(\"div\", { className: 'result-hashtag' }, \"#\"),\n            React.createElement(\"p\", { className: 'channel-search__result-text' }, (_b = channel_1.data) === null || _b === void 0 ? void 0 : _b.name)));\n    }\n    else {\n        return (React.createElement(\"button\", { \"aria-label\": \"Select User Channel: \" + (result.name || ''), className: \"str-chat__channel-search-result \" + (focused ? 'focused' : ''), onClick: function () { return selectResult(result); } },\n            React.createElement(Avatar, { image: result.image, user: result }),\n            result.name || result.id));\n    }\n};\nexport var SearchResults = function (props) {\n    var _a = props.DropdownContainer, DropdownContainer = _a === void 0 ? DefaultDropdownContainer : _a, popupResults = props.popupResults, results = props.results, searching = props.searching, SearchEmpty = props.SearchEmpty, SearchResultsHeader = props.SearchResultsHeader, SearchLoading = props.SearchLoading, _b = props.SearchResultItem, SearchResultItem = _b === void 0 ? DefaultSearchResultItem : _b, selectResult = props.selectResult;\n    var t = useTranslationContext('SearchResults').t;\n    var _c = useState(), focusedUser = _c[0], setFocusedUser = _c[1];\n    var device = useBreakpoint().device;\n    var containerStyle = popupResults && device === 'full' ? 'popup' : 'inline';\n    var ResultsContainer = function (_a) {\n        var children = _a.children;\n        return (React.createElement(\"div\", { className: \"str-chat__channel-search-container \" + containerStyle }, children));\n    };\n    var handleKeyDown = useCallback(function (event) {\n        if (event.key === 'ArrowUp') {\n            setFocusedUser(function (prevFocused) {\n                if (prevFocused === undefined)\n                    return 0;\n                return prevFocused === 0 ? results.length - 1 : prevFocused - 1;\n            });\n        }\n        if (event.key === 'ArrowDown') {\n            setFocusedUser(function (prevFocused) {\n                if (prevFocused === undefined)\n                    return 0;\n                return prevFocused === results.length - 1 ? 0 : prevFocused + 1;\n            });\n        }\n        if (event.key === 'Enter') {\n            event.preventDefault();\n            if (focusedUser !== undefined) {\n                selectResult(results[focusedUser]);\n                return setFocusedUser(undefined);\n            }\n        }\n    }, [focusedUser]);\n    useEffect(function () {\n        document.addEventListener('keydown', handleKeyDown, false);\n        return function () { return document.removeEventListener('keydown', handleKeyDown); };\n    }, [handleKeyDown]);\n    if (searching) {\n        return (React.createElement(ResultsContainer, null, SearchLoading ? (React.createElement(SearchLoading, null)) : (React.createElement(\"div\", { className: 'str-chat__channel-search-container-searching' }, t('Searching...')))));\n    }\n    if (!results.length) {\n        return (React.createElement(ResultsContainer, null, SearchEmpty ? (React.createElement(SearchEmpty, null)) : (React.createElement(\"div\", { \"aria-live\": 'polite', className: 'str-chat__channel-search-container-empty' }, t('No results found')))));\n    }\n    return (React.createElement(ResultsContainer, null,\n        SearchResultsHeader && React.createElement(SearchResultsHeader, null),\n        React.createElement(DropdownContainer, { focusedUser: focusedUser, results: results, SearchResultItem: SearchResultItem, selectResult: selectResult })));\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}