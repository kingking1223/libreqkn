{"ast":null,"code":"import React, { useEffect, useState } from 'react';\nimport { useChatContext } from '../../../context/ChatContext';\nimport { useChannelStateContext } from '../../../context/ChannelStateContext';\nexport var CooldownTimer = function (props) {\n  var cooldownInterval = props.cooldownInterval,\n    setCooldownRemaining = props.setCooldownRemaining;\n  var _a = useState(cooldownInterval),\n    seconds = _a[0],\n    setSeconds = _a[1];\n  useEffect(function () {\n    var countdownInterval = setInterval(function () {\n      if (seconds > 0) {\n        setSeconds(seconds - 1);\n      } else {\n        setCooldownRemaining(0);\n      }\n    }, 1000);\n    return function () {\n      return clearInterval(countdownInterval);\n    };\n  });\n  return React.createElement(\"div\", null, seconds === 0 ? null : seconds);\n};\nexport var useCooldownTimer = function () {\n  var latestMessageDatesByChannels = useChatContext('useCooldownTimer').latestMessageDatesByChannels;\n  var channel = useChannelStateContext('useCooldownTimer').channel;\n  var _a = channel.data || {},\n    cooldownInterval = _a.cooldown,\n    own_capabilities = _a.own_capabilities;\n  var _b = useState(),\n    cooldownRemaining = _b[0],\n    setCooldownRemaining = _b[1];\n  var skipCooldown = !(own_capabilities === null || own_capabilities === void 0 ? void 0 : own_capabilities.includes('slow-mode'));\n  useEffect(function () {\n    var latestMessageDate = latestMessageDatesByChannels[channel.cid];\n    if (!cooldownInterval || !latestMessageDate) {\n      return;\n    }\n    var remainingCooldown = Math.round(cooldownInterval - (new Date().getTime() - latestMessageDate.getTime()) / 1000);\n    if (remainingCooldown > 0 && !skipCooldown) {\n      setCooldownRemaining(remainingCooldown);\n    }\n  }, [channel.id, cooldownInterval, latestMessageDatesByChannels[channel.cid]]);\n  return {\n    cooldownInterval: cooldownInterval || 0,\n    cooldownRemaining: cooldownRemaining,\n    setCooldownRemaining: setCooldownRemaining\n  };\n};","map":{"version":3,"names":["React","useEffect","useState","useChatContext","useChannelStateContext","CooldownTimer","props","cooldownInterval","setCooldownRemaining","_a","seconds","setSeconds","countdownInterval","setInterval","clearInterval","createElement","useCooldownTimer","latestMessageDatesByChannels","channel","data","cooldown","own_capabilities","_b","cooldownRemaining","skipCooldown","includes","latestMessageDate","cid","remainingCooldown","Math","round","Date","getTime","id"],"sources":["/home/kingking/Documents/code/website/libreqkn/client/node_modules/stream-chat-react/dist/components/MessageInput/hooks/useCooldownTimer.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useChatContext } from '../../../context/ChatContext';\nimport { useChannelStateContext } from '../../../context/ChannelStateContext';\nexport var CooldownTimer = function (props) {\n    var cooldownInterval = props.cooldownInterval, setCooldownRemaining = props.setCooldownRemaining;\n    var _a = useState(cooldownInterval), seconds = _a[0], setSeconds = _a[1];\n    useEffect(function () {\n        var countdownInterval = setInterval(function () {\n            if (seconds > 0) {\n                setSeconds(seconds - 1);\n            }\n            else {\n                setCooldownRemaining(0);\n            }\n        }, 1000);\n        return function () { return clearInterval(countdownInterval); };\n    });\n    return React.createElement(\"div\", null, seconds === 0 ? null : seconds);\n};\nexport var useCooldownTimer = function () {\n    var latestMessageDatesByChannels = useChatContext('useCooldownTimer').latestMessageDatesByChannels;\n    var channel = useChannelStateContext('useCooldownTimer').channel;\n    var _a = (channel.data ||\n        {}), cooldownInterval = _a.cooldown, own_capabilities = _a.own_capabilities;\n    var _b = useState(), cooldownRemaining = _b[0], setCooldownRemaining = _b[1];\n    var skipCooldown = !(own_capabilities === null || own_capabilities === void 0 ? void 0 : own_capabilities.includes('slow-mode'));\n    useEffect(function () {\n        var latestMessageDate = latestMessageDatesByChannels[channel.cid];\n        if (!cooldownInterval || !latestMessageDate) {\n            return;\n        }\n        var remainingCooldown = Math.round(cooldownInterval - (new Date().getTime() - latestMessageDate.getTime()) / 1000);\n        if (remainingCooldown > 0 && !skipCooldown) {\n            setCooldownRemaining(remainingCooldown);\n        }\n    }, [channel.id, cooldownInterval, latestMessageDatesByChannels[channel.cid]]);\n    return {\n        cooldownInterval: cooldownInterval || 0,\n        cooldownRemaining: cooldownRemaining,\n        setCooldownRemaining: setCooldownRemaining,\n    };\n};\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,cAAc,QAAQ,8BAA8B;AAC7D,SAASC,sBAAsB,QAAQ,sCAAsC;AAC7E,OAAO,IAAIC,aAAa,GAAG,UAAUC,KAAK,EAAE;EACxC,IAAIC,gBAAgB,GAAGD,KAAK,CAACC,gBAAgB;IAAEC,oBAAoB,GAAGF,KAAK,CAACE,oBAAoB;EAChG,IAAIC,EAAE,GAAGP,QAAQ,CAACK,gBAAgB,CAAC;IAAEG,OAAO,GAAGD,EAAE,CAAC,CAAC,CAAC;IAAEE,UAAU,GAAGF,EAAE,CAAC,CAAC,CAAC;EACxER,SAAS,CAAC,YAAY;IAClB,IAAIW,iBAAiB,GAAGC,WAAW,CAAC,YAAY;MAC5C,IAAIH,OAAO,GAAG,CAAC,EAAE;QACbC,UAAU,CAACD,OAAO,GAAG,CAAC,CAAC;MAC3B,CAAC,MACI;QACDF,oBAAoB,CAAC,CAAC,CAAC;MAC3B;IACJ,CAAC,EAAE,IAAI,CAAC;IACR,OAAO,YAAY;MAAE,OAAOM,aAAa,CAACF,iBAAiB,CAAC;IAAE,CAAC;EACnE,CAAC,CAAC;EACF,OAAOZ,KAAK,CAACe,aAAa,CAAC,KAAK,EAAE,IAAI,EAAEL,OAAO,KAAK,CAAC,GAAG,IAAI,GAAGA,OAAO,CAAC;AAC3E,CAAC;AACD,OAAO,IAAIM,gBAAgB,GAAG,YAAY;EACtC,IAAIC,4BAA4B,GAAGd,cAAc,CAAC,kBAAkB,CAAC,CAACc,4BAA4B;EAClG,IAAIC,OAAO,GAAGd,sBAAsB,CAAC,kBAAkB,CAAC,CAACc,OAAO;EAChE,IAAIT,EAAE,GAAIS,OAAO,CAACC,IAAI,IAClB,CAAC,CAAE;IAAEZ,gBAAgB,GAAGE,EAAE,CAACW,QAAQ;IAAEC,gBAAgB,GAAGZ,EAAE,CAACY,gBAAgB;EAC/E,IAAIC,EAAE,GAAGpB,QAAQ,EAAE;IAAEqB,iBAAiB,GAAGD,EAAE,CAAC,CAAC,CAAC;IAAEd,oBAAoB,GAAGc,EAAE,CAAC,CAAC,CAAC;EAC5E,IAAIE,YAAY,GAAG,EAAEH,gBAAgB,KAAK,IAAI,IAAIA,gBAAgB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,gBAAgB,CAACI,QAAQ,CAAC,WAAW,CAAC,CAAC;EAChIxB,SAAS,CAAC,YAAY;IAClB,IAAIyB,iBAAiB,GAAGT,4BAA4B,CAACC,OAAO,CAACS,GAAG,CAAC;IACjE,IAAI,CAACpB,gBAAgB,IAAI,CAACmB,iBAAiB,EAAE;MACzC;IACJ;IACA,IAAIE,iBAAiB,GAAGC,IAAI,CAACC,KAAK,CAACvB,gBAAgB,GAAG,CAAC,IAAIwB,IAAI,EAAE,CAACC,OAAO,EAAE,GAAGN,iBAAiB,CAACM,OAAO,EAAE,IAAI,IAAI,CAAC;IAClH,IAAIJ,iBAAiB,GAAG,CAAC,IAAI,CAACJ,YAAY,EAAE;MACxChB,oBAAoB,CAACoB,iBAAiB,CAAC;IAC3C;EACJ,CAAC,EAAE,CAACV,OAAO,CAACe,EAAE,EAAE1B,gBAAgB,EAAEU,4BAA4B,CAACC,OAAO,CAACS,GAAG,CAAC,CAAC,CAAC;EAC7E,OAAO;IACHpB,gBAAgB,EAAEA,gBAAgB,IAAI,CAAC;IACvCgB,iBAAiB,EAAEA,iBAAiB;IACpCf,oBAAoB,EAAEA;EAC1B,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}