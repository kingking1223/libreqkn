{"ast":null,"code":"import { useEffect, useRef, useState } from 'react';\nexport function useNewMessageNotification(messages, currentUserId, hasMoreNewer) {\n  var _a = useState(false),\n    newMessagesNotification = _a[0],\n    setNewMessagesNotification = _a[1];\n  /**\n   * use the flag to avoid the initial \"new messages\" quick blink\n   */\n  var didMount = useRef(false);\n  var lastMessageId = useRef('');\n  var atBottom = useRef(false);\n  useEffect(function () {\n    var _a;\n    if (hasMoreNewer) {\n      setNewMessagesNotification(true);\n      return;\n    }\n    /* handle scrolling behavior for new messages */\n    if (!(messages === null || messages === void 0 ? void 0 : messages.length)) return;\n    var lastMessage = messages[messages.length - 1];\n    var prevMessageId = lastMessageId.current;\n    lastMessageId.current = lastMessage.id || ''; // update last message id\n    /* do nothing if new messages are loaded from top(loadMore)  */\n    if (lastMessage.id === prevMessageId) return;\n    /* if list is already at the bottom return, followOutput will do the job */\n    if (atBottom.current) return;\n    /* if the new message belongs to current user scroll to bottom */\n    if (((_a = lastMessage.user) === null || _a === void 0 ? void 0 : _a.id) !== currentUserId && didMount.current) {\n      /* otherwise just show newMessage notification  */\n      setNewMessagesNotification(true);\n    }\n    didMount.current = true;\n  }, [currentUserId, messages, hasMoreNewer]);\n  return {\n    atBottom: atBottom,\n    newMessagesNotification: newMessagesNotification,\n    setNewMessagesNotification: setNewMessagesNotification\n  };\n}","map":{"version":3,"names":["useEffect","useRef","useState","useNewMessageNotification","messages","currentUserId","hasMoreNewer","_a","newMessagesNotification","setNewMessagesNotification","didMount","lastMessageId","atBottom","length","lastMessage","prevMessageId","current","id","user"],"sources":["/home/kingking/Documents/code/website/libreqkn/client/node_modules/stream-chat-react/dist/components/MessageList/hooks/useNewMessageNotification.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nexport function useNewMessageNotification(messages, currentUserId, hasMoreNewer) {\n    var _a = useState(false), newMessagesNotification = _a[0], setNewMessagesNotification = _a[1];\n    /**\n     * use the flag to avoid the initial \"new messages\" quick blink\n     */\n    var didMount = useRef(false);\n    var lastMessageId = useRef('');\n    var atBottom = useRef(false);\n    useEffect(function () {\n        var _a;\n        if (hasMoreNewer) {\n            setNewMessagesNotification(true);\n            return;\n        }\n        /* handle scrolling behavior for new messages */\n        if (!(messages === null || messages === void 0 ? void 0 : messages.length))\n            return;\n        var lastMessage = messages[messages.length - 1];\n        var prevMessageId = lastMessageId.current;\n        lastMessageId.current = lastMessage.id || ''; // update last message id\n        /* do nothing if new messages are loaded from top(loadMore)  */\n        if (lastMessage.id === prevMessageId)\n            return;\n        /* if list is already at the bottom return, followOutput will do the job */\n        if (atBottom.current)\n            return;\n        /* if the new message belongs to current user scroll to bottom */\n        if (((_a = lastMessage.user) === null || _a === void 0 ? void 0 : _a.id) !== currentUserId && didMount.current) {\n            /* otherwise just show newMessage notification  */\n            setNewMessagesNotification(true);\n        }\n        didMount.current = true;\n    }, [currentUserId, messages, hasMoreNewer]);\n    return { atBottom: atBottom, newMessagesNotification: newMessagesNotification, setNewMessagesNotification: setNewMessagesNotification };\n}\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnD,OAAO,SAASC,yBAAyB,CAACC,QAAQ,EAAEC,aAAa,EAAEC,YAAY,EAAE;EAC7E,IAAIC,EAAE,GAAGL,QAAQ,CAAC,KAAK,CAAC;IAAEM,uBAAuB,GAAGD,EAAE,CAAC,CAAC,CAAC;IAAEE,0BAA0B,GAAGF,EAAE,CAAC,CAAC,CAAC;EAC7F;AACJ;AACA;EACI,IAAIG,QAAQ,GAAGT,MAAM,CAAC,KAAK,CAAC;EAC5B,IAAIU,aAAa,GAAGV,MAAM,CAAC,EAAE,CAAC;EAC9B,IAAIW,QAAQ,GAAGX,MAAM,CAAC,KAAK,CAAC;EAC5BD,SAAS,CAAC,YAAY;IAClB,IAAIO,EAAE;IACN,IAAID,YAAY,EAAE;MACdG,0BAA0B,CAAC,IAAI,CAAC;MAChC;IACJ;IACA;IACA,IAAI,EAAEL,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACS,MAAM,CAAC,EACtE;IACJ,IAAIC,WAAW,GAAGV,QAAQ,CAACA,QAAQ,CAACS,MAAM,GAAG,CAAC,CAAC;IAC/C,IAAIE,aAAa,GAAGJ,aAAa,CAACK,OAAO;IACzCL,aAAa,CAACK,OAAO,GAAGF,WAAW,CAACG,EAAE,IAAI,EAAE,CAAC,CAAC;IAC9C;IACA,IAAIH,WAAW,CAACG,EAAE,KAAKF,aAAa,EAChC;IACJ;IACA,IAAIH,QAAQ,CAACI,OAAO,EAChB;IACJ;IACA,IAAI,CAAC,CAACT,EAAE,GAAGO,WAAW,CAACI,IAAI,MAAM,IAAI,IAAIX,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACU,EAAE,MAAMZ,aAAa,IAAIK,QAAQ,CAACM,OAAO,EAAE;MAC5G;MACAP,0BAA0B,CAAC,IAAI,CAAC;IACpC;IACAC,QAAQ,CAACM,OAAO,GAAG,IAAI;EAC3B,CAAC,EAAE,CAACX,aAAa,EAAED,QAAQ,EAAEE,YAAY,CAAC,CAAC;EAC3C,OAAO;IAAEM,QAAQ,EAAEA,QAAQ;IAAEJ,uBAAuB,EAAEA,uBAAuB;IAAEC,0BAA0B,EAAEA;EAA2B,CAAC;AAC3I"},"metadata":{},"sourceType":"module","externalDependencies":[]}