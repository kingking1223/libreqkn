{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport React, { Suspense, useMemo, useState } from 'react';\nimport { getStrippedEmojiData } from '../Channel/emojiData';\nimport { useEmojiContext } from '../../context/EmojiContext';\nimport { useMessageContext } from '../../context/MessageContext';\nvar UnMemoizedSimpleReactionsList = function (props) {\n  var _a = props.additionalEmojiProps,\n    additionalEmojiProps = _a === void 0 ? {} : _a,\n    propHandleReaction = props.handleReaction,\n    propReactionCounts = props.reaction_counts,\n    propReactionOptions = props.reactionOptions,\n    propReactions = props.reactions;\n  var _b = useEmojiContext('SimpleReactionsList'),\n    Emoji = _b.Emoji,\n    emojiConfig = _b.emojiConfig;\n  var _c = useMessageContext('SimpleReactionsList'),\n    contextHandleReaction = _c.handleReaction,\n    message = _c.message;\n  var _d = emojiConfig || {},\n    defaultMinimalEmojis = _d.defaultMinimalEmojis,\n    fullEmojiData = _d.emojiData,\n    emojiSetDef = _d.emojiSetDef;\n  var _e = useState(undefined),\n    tooltipReactionType = _e[0],\n    setTooltipReactionType = _e[1];\n  var handleReaction = propHandleReaction || contextHandleReaction;\n  var reactions = propReactions || message.latest_reactions || [];\n  var reactionCounts = propReactionCounts || message.reaction_counts || {};\n  var reactionOptions = propReactionOptions || defaultMinimalEmojis;\n  var reactionsAreCustom = !!(propReactionOptions === null || propReactionOptions === void 0 ? void 0 : propReactionOptions.length);\n  var emojiData = useMemo(function () {\n    return reactionsAreCustom ? fullEmojiData : getStrippedEmojiData(fullEmojiData);\n  }, [fullEmojiData, reactionsAreCustom]);\n  if (!reactions.length) return null;\n  var getUsersPerReactionType = function (type) {\n    return reactions.map(function (reaction) {\n      var _a, _b;\n      if (reaction.type === type) {\n        return ((_a = reaction.user) === null || _a === void 0 ? void 0 : _a.name) || ((_b = reaction.user) === null || _b === void 0 ? void 0 : _b.id);\n      }\n      return null;\n    }).filter(Boolean);\n  };\n  var getTotalReactionCount = function () {\n    return Object.values(reactionCounts).reduce(function (total, count) {\n      return total + count;\n    }, 0);\n  };\n  var getCurrentMessageReactionTypes = function () {\n    var reactionTypes = [];\n    reactions.forEach(function (_a) {\n      var type = _a.type;\n      if (reactionTypes.indexOf(type) === -1) {\n        reactionTypes.push(type);\n      }\n    });\n    return reactionTypes;\n  };\n  var getEmojiByReactionType = function (type) {\n    var reactionEmoji = reactionOptions.find(function (option) {\n      return option.id === type;\n    });\n    return reactionEmoji;\n  };\n  var getSupportedReactionMap = function () {\n    var reactionMap = {};\n    reactionOptions.forEach(function (_a) {\n      var id = _a.id;\n      return reactionMap[id] = true;\n    });\n    return reactionMap;\n  };\n  var messageReactionTypes = getCurrentMessageReactionTypes();\n  var supportedReactionMap = getSupportedReactionMap();\n  var supportedReactionsArePresent = messageReactionTypes.some(function (type) {\n    return supportedReactionMap[type];\n  });\n  if (!supportedReactionsArePresent) return null;\n  return React.createElement(\"ul\", {\n    className: 'str-chat__simple-reactions-list',\n    \"data-testid\": 'simple-reaction-list',\n    onMouseLeave: function () {\n      return setTooltipReactionType(undefined);\n    }\n  }, messageReactionTypes.map(function (reactionType, i) {\n    var _a;\n    var emojiObject = getEmojiByReactionType(reactionType);\n    return emojiObject ? React.createElement(\"li\", {\n      className: 'str-chat__simple-reactions-list-item',\n      key: emojiObject.id + \"-\" + i,\n      onClick: function (event) {\n        return handleReaction(reactionType, event);\n      },\n      onKeyPress: function (event) {\n        return handleReaction(reactionType, event);\n      }\n    }, React.createElement(\"span\", {\n      onMouseEnter: function () {\n        return setTooltipReactionType(reactionType);\n      }\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(Emoji, __assign({\n      data: emojiData,\n      emoji: emojiObject,\n      size: 13\n    }, reactionsAreCustom ? additionalEmojiProps : emojiSetDef))), \"\\u00A0\"), tooltipReactionType === emojiObject.id && React.createElement(\"div\", {\n      className: 'str-chat__simple-reactions-list-tooltip'\n    }, React.createElement(\"div\", {\n      className: 'arrow'\n    }), (_a = getUsersPerReactionType(tooltipReactionType)) === null || _a === void 0 ? void 0 : _a.join(', '))) : null;\n  }), React.createElement(\"li\", {\n    className: 'str-chat__simple-reactions-list-item--last-number'\n  }, getTotalReactionCount()));\n};\nexport var SimpleReactionsList = React.memo(UnMemoizedSimpleReactionsList);","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","Suspense","useMemo","useState","getStrippedEmojiData","useEmojiContext","useMessageContext","UnMemoizedSimpleReactionsList","props","_a","additionalEmojiProps","propHandleReaction","handleReaction","propReactionCounts","reaction_counts","propReactionOptions","reactionOptions","propReactions","reactions","_b","Emoji","emojiConfig","_c","contextHandleReaction","message","_d","defaultMinimalEmojis","fullEmojiData","emojiData","emojiSetDef","_e","undefined","tooltipReactionType","setTooltipReactionType","latest_reactions","reactionCounts","reactionsAreCustom","getUsersPerReactionType","type","map","reaction","user","name","id","filter","Boolean","getTotalReactionCount","values","reduce","total","count","getCurrentMessageReactionTypes","reactionTypes","forEach","indexOf","push","getEmojiByReactionType","reactionEmoji","find","option","getSupportedReactionMap","reactionMap","messageReactionTypes","supportedReactionMap","supportedReactionsArePresent","some","createElement","className","onMouseLeave","reactionType","emojiObject","key","onClick","event","onKeyPress","onMouseEnter","fallback","data","emoji","size","join","SimpleReactionsList","memo"],"sources":["/home/kingking/Documents/code/website/libreqkn/client/node_modules/stream-chat-react/dist/components/Reactions/SimpleReactionsList.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { Suspense, useMemo, useState } from 'react';\nimport { getStrippedEmojiData } from '../Channel/emojiData';\nimport { useEmojiContext } from '../../context/EmojiContext';\nimport { useMessageContext } from '../../context/MessageContext';\nvar UnMemoizedSimpleReactionsList = function (props) {\n    var _a = props.additionalEmojiProps, additionalEmojiProps = _a === void 0 ? {} : _a, propHandleReaction = props.handleReaction, propReactionCounts = props.reaction_counts, propReactionOptions = props.reactionOptions, propReactions = props.reactions;\n    var _b = useEmojiContext('SimpleReactionsList'), Emoji = _b.Emoji, emojiConfig = _b.emojiConfig;\n    var _c = useMessageContext('SimpleReactionsList'), contextHandleReaction = _c.handleReaction, message = _c.message;\n    var _d = emojiConfig || {}, defaultMinimalEmojis = _d.defaultMinimalEmojis, fullEmojiData = _d.emojiData, emojiSetDef = _d.emojiSetDef;\n    var _e = useState(undefined), tooltipReactionType = _e[0], setTooltipReactionType = _e[1];\n    var handleReaction = propHandleReaction || contextHandleReaction;\n    var reactions = propReactions || message.latest_reactions || [];\n    var reactionCounts = propReactionCounts || message.reaction_counts || {};\n    var reactionOptions = propReactionOptions || defaultMinimalEmojis;\n    var reactionsAreCustom = !!(propReactionOptions === null || propReactionOptions === void 0 ? void 0 : propReactionOptions.length);\n    var emojiData = useMemo(function () { return (reactionsAreCustom ? fullEmojiData : getStrippedEmojiData(fullEmojiData)); }, [fullEmojiData, reactionsAreCustom]);\n    if (!reactions.length)\n        return null;\n    var getUsersPerReactionType = function (type) {\n        return reactions\n            .map(function (reaction) {\n            var _a, _b;\n            if (reaction.type === type) {\n                return ((_a = reaction.user) === null || _a === void 0 ? void 0 : _a.name) || ((_b = reaction.user) === null || _b === void 0 ? void 0 : _b.id);\n            }\n            return null;\n        })\n            .filter(Boolean);\n    };\n    var getTotalReactionCount = function () {\n        return Object.values(reactionCounts).reduce(function (total, count) { return total + count; }, 0);\n    };\n    var getCurrentMessageReactionTypes = function () {\n        var reactionTypes = [];\n        reactions.forEach(function (_a) {\n            var type = _a.type;\n            if (reactionTypes.indexOf(type) === -1) {\n                reactionTypes.push(type);\n            }\n        });\n        return reactionTypes;\n    };\n    var getEmojiByReactionType = function (type) {\n        var reactionEmoji = reactionOptions.find(function (option) { return option.id === type; });\n        return reactionEmoji;\n    };\n    var getSupportedReactionMap = function () {\n        var reactionMap = {};\n        reactionOptions.forEach(function (_a) {\n            var id = _a.id;\n            return (reactionMap[id] = true);\n        });\n        return reactionMap;\n    };\n    var messageReactionTypes = getCurrentMessageReactionTypes();\n    var supportedReactionMap = getSupportedReactionMap();\n    var supportedReactionsArePresent = messageReactionTypes.some(function (type) { return supportedReactionMap[type]; });\n    if (!supportedReactionsArePresent)\n        return null;\n    return (React.createElement(\"ul\", { className: 'str-chat__simple-reactions-list', \"data-testid\": 'simple-reaction-list', onMouseLeave: function () { return setTooltipReactionType(undefined); } },\n        messageReactionTypes.map(function (reactionType, i) {\n            var _a;\n            var emojiObject = getEmojiByReactionType(reactionType);\n            return emojiObject ? (React.createElement(\"li\", { className: 'str-chat__simple-reactions-list-item', key: emojiObject.id + \"-\" + i, onClick: function (event) { return handleReaction(reactionType, event); }, onKeyPress: function (event) { return handleReaction(reactionType, event); } },\n                React.createElement(\"span\", { onMouseEnter: function () { return setTooltipReactionType(reactionType); } },\n                    React.createElement(Suspense, { fallback: null },\n                        React.createElement(Emoji, __assign({ data: emojiData, emoji: emojiObject, size: 13 }, (reactionsAreCustom ? additionalEmojiProps : emojiSetDef)))),\n                    \"\\u00A0\"),\n                tooltipReactionType === emojiObject.id && (React.createElement(\"div\", { className: 'str-chat__simple-reactions-list-tooltip' },\n                    React.createElement(\"div\", { className: 'arrow' }), (_a = getUsersPerReactionType(tooltipReactionType)) === null || _a === void 0 ? void 0 :\n                    _a.join(', '))))) : null;\n        }),\n        React.createElement(\"li\", { className: 'str-chat__simple-reactions-list-item--last-number' }, getTotalReactionCount())));\n};\nexport var SimpleReactionsList = React.memo(UnMemoizedSimpleReactionsList);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}