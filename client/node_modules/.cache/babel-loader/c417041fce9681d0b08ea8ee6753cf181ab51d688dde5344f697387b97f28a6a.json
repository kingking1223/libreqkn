{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport React from 'react';\nimport emojiRegex from 'emoji-regex';\nimport * as linkify from 'linkifyjs';\nimport { nanoid } from 'nanoid';\nimport { findAndReplace } from 'mdast-util-find-and-replace';\nimport RootReactMarkdown from 'react-markdown';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport uniqBy from 'lodash.uniqby';\nexport var isOnlyEmojis = function (text) {\n  if (!text) return false;\n  var noEmojis = text.replace(emojiRegex(), '');\n  var noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\n  return !noSpace;\n};\nvar allowedMarkups = ['html',\n// @ts-expect-error\n'root', 'text', 'break', 'paragraph', 'emphasis', 'strong', 'link', 'list', 'listItem', 'code', 'inlineCode', 'blockquote', 'delete'];\nexport var matchMarkdownLinks = function (message) {\n  var regexMdLinks = /\\[([^[]+)\\](\\(.*\\))/gm;\n  var matches = message.match(regexMdLinks);\n  var singleMatch = /\\[([^[]+)\\]\\((.*)\\)/;\n  var links = matches ? matches.map(function (match) {\n    var i = singleMatch.exec(match);\n    return i && [i[1], i[2]];\n  }) : [];\n  return links.flat();\n};\nexport var messageCodeBlocks = function (message) {\n  var codeRegex = /```[a-z]*\\n[\\s\\S]*?\\n```|`[a-z]*[\\s\\S]*?`/gm;\n  var matches = message.match(codeRegex);\n  return matches || [];\n};\nvar detectHttp = /(http(s?):\\/\\/)?(www\\.)?/;\nfunction formatUrlForDisplay(url) {\n  try {\n    return decodeURIComponent(url).replace(detectHttp, '');\n  } catch (e) {\n    return url;\n  }\n}\nfunction encodeDecode(url) {\n  try {\n    return encodeURI(decodeURIComponent(url));\n  } catch (error) {\n    return url;\n  }\n}\nexport var markDownRenderers = {\n  // eslint-disable-next-line react/display-name\n  link: function (props) {\n    var children = props.children,\n      href = props.href;\n    var isEmail = href === null || href === void 0 ? void 0 : href.startsWith('mailto:');\n    var isUrl = href === null || href === void 0 ? void 0 : href.startsWith('http');\n    if (!href || !isEmail && !isUrl) {\n      return children;\n    }\n    return React.createElement(\"a\", {\n      className: \"\" + (isUrl ? 'str-chat__message-url-link' : ''),\n      href: href,\n      rel: 'nofollow noreferrer noopener',\n      target: '_blank'\n    }, children);\n  },\n  span: 'span'\n};\nexport var emojiMarkdownPlugin = function () {\n  function replace(match) {\n    return {\n      children: [{\n        type: 'text',\n        value: match\n      }],\n      className: 'inline-text-emoji',\n      type: 'span'\n    };\n  }\n  var transform = function (markdownAST) {\n    findAndReplace(markdownAST, emojiRegex(), replace);\n    return markdownAST;\n  };\n  return transform;\n};\nexport var mentionsMarkdownPlugin = function (mentioned_users) {\n  return function () {\n    var mentioned_usernames = mentioned_users.map(function (user) {\n      return user.name || user.id;\n    }).filter(Boolean).map(escapeRegExp);\n    function replace(match) {\n      var usernameOrId = match.replace('@', '');\n      var user = mentioned_users.find(function (_a) {\n        var id = _a.id,\n          name = _a.name;\n        return name === usernameOrId || id === usernameOrId;\n      });\n      return {\n        children: [{\n          type: 'text',\n          value: match\n        }],\n        mentioned_user: user,\n        type: 'mention'\n      };\n    }\n    var transform = function (markdownAST) {\n      if (!mentioned_usernames.length) {\n        return markdownAST;\n      }\n      var mentionedUsersRegex = new RegExp(mentioned_usernames.map(function (username) {\n        return \"@\" + username;\n      }).join('|'), 'g');\n      findAndReplace(markdownAST, mentionedUsersRegex, replace);\n      return markdownAST;\n    };\n    return transform;\n  };\n};\nvar Mention = function (props) {\n  return React.createElement(\"span\", {\n    className: 'str-chat__message-mention'\n  }, props.children);\n};\nexport var renderText = function (text, mentioned_users, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  // take the @ mentions and turn them into markdown?\n  // translate links\n  if (!text) return null;\n  var newText = text;\n  var markdownLinks = matchMarkdownLinks(newText);\n  var codeBlocks = messageCodeBlocks(newText);\n  // extract all valid links/emails within text and replace it with proper markup\n  uniqBy(linkify.find(newText), 'value').forEach(function (_a) {\n    var href = _a.href,\n      type = _a.type,\n      value = _a.value;\n    var linkIsInBlock = codeBlocks.some(function (block) {\n      return block === null || block === void 0 ? void 0 : block.includes(value);\n    });\n    // check if message is already  markdown\n    var noParsingNeeded = markdownLinks && markdownLinks.filter(function (text) {\n      var strippedHref = href === null || href === void 0 ? void 0 : href.replace(detectHttp, '');\n      var strippedText = text === null || text === void 0 ? void 0 : text.replace(detectHttp, '');\n      if (!strippedHref || !strippedText) return false;\n      return strippedHref.includes(strippedText) || strippedText.includes(strippedHref);\n    });\n    if (noParsingNeeded.length > 0 || linkIsInBlock) return;\n    try {\n      // special case for mentions:\n      // it could happen that a user's name matches with an e-mail format pattern.\n      // in that case, we check whether the found e-mail is actually a mention\n      // by naively checking for an existence of @ sign in front of it.\n      if (type === 'email' && mentioned_users) {\n        var emailMatchesWithName = mentioned_users.some(function (u) {\n          return u.name === value;\n        });\n        if (emailMatchesWithName) {\n          newText = newText.replace(new RegExp(escapeRegExp(value), 'g'), function (match, position) {\n            var isMention = newText.charAt(position - 1) === '@';\n            // in case of mention, we leave the match in its original form,\n            // and we let `mentionsMarkdownPlugin` to do its job\n            return isMention ? match : \"[\" + match + \"](\" + encodeDecode(href) + \")\";\n          });\n          return;\n        }\n      }\n      var displayLink = type === 'email' ? value : formatUrlForDisplay(href);\n      newText = newText.replace(new RegExp(escapeRegExp(value), 'g'), \"[\" + displayLink + \"](\" + encodeDecode(href) + \")\");\n    } catch (e) {\n      void e;\n    }\n  });\n  var plugins = [emojiMarkdownPlugin];\n  if (mentioned_users === null || mentioned_users === void 0 ? void 0 : mentioned_users.length) {\n    plugins.push(mentionsMarkdownPlugin(mentioned_users));\n  }\n  var renderers = __assign(__assign({\n    mention: Mention\n  }, markDownRenderers), options.customMarkDownRenderers);\n  return React.createElement(ReactMarkdown, {\n    allowedTypes: allowedMarkups,\n    escapeHtml: true,\n    plugins: plugins,\n    renderers: renderers,\n    source: newText,\n    transformLinkUri: function (uri) {\n      return uri.startsWith('app://') ? uri : RootReactMarkdown.uriTransformer(uri);\n    },\n    unwrapDisallowed: true\n  });\n};\nexport function escapeRegExp(text) {\n  return text.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, '\\\\$&');\n}\n/**\n * @deprecated will be removed in the next major release\n */\nexport var generateRandomId = nanoid;\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charAt#getting_whole_characters\nexport var getWholeChar = function (str, i) {\n  var code = str.charCodeAt(i);\n  if (Number.isNaN(code)) return '';\n  if (code < 0xd800 || code > 0xdfff) return str.charAt(i);\n  if (0xd800 <= code && code <= 0xdbff) {\n    if (str.length <= i + 1) {\n      throw 'High surrogate without following low surrogate';\n    }\n    var next = str.charCodeAt(i + 1);\n    if (0xdc00 > next || next > 0xdfff) {\n      throw 'High surrogate without following low surrogate';\n    }\n    return str.charAt(i) + str.charAt(i + 1);\n  }\n  if (i === 0) {\n    throw 'Low surrogate without preceding high surrogate';\n  }\n  var prev = str.charCodeAt(i - 1);\n  if (0xd800 > prev || prev > 0xdbff) {\n    throw 'Low surrogate without preceding high surrogate';\n  }\n  return '';\n};","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","emojiRegex","linkify","nanoid","findAndReplace","RootReactMarkdown","ReactMarkdown","uniqBy","isOnlyEmojis","text","noEmojis","replace","noSpace","allowedMarkups","matchMarkdownLinks","message","regexMdLinks","matches","match","singleMatch","links","map","exec","flat","messageCodeBlocks","codeRegex","detectHttp","formatUrlForDisplay","url","decodeURIComponent","e","encodeDecode","encodeURI","error","markDownRenderers","link","props","children","href","isEmail","startsWith","isUrl","createElement","className","rel","target","span","emojiMarkdownPlugin","type","value","transform","markdownAST","mentionsMarkdownPlugin","mentioned_users","mentioned_usernames","user","name","id","filter","Boolean","escapeRegExp","usernameOrId","find","_a","mentioned_user","mentionedUsersRegex","RegExp","username","join","Mention","renderText","options","newText","markdownLinks","codeBlocks","forEach","linkIsInBlock","some","block","includes","noParsingNeeded","strippedHref","strippedText","emailMatchesWithName","u","position","isMention","charAt","displayLink","plugins","push","renderers","mention","customMarkDownRenderers","allowedTypes","escapeHtml","source","transformLinkUri","uri","uriTransformer","unwrapDisallowed","generateRandomId","getWholeChar","str","code","charCodeAt","Number","isNaN","next","prev"],"sources":["/home/kingking/Documents/code/website/libreqkn/client/node_modules/stream-chat-react/dist/utils.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from 'react';\nimport emojiRegex from 'emoji-regex';\nimport * as linkify from 'linkifyjs';\nimport { nanoid } from 'nanoid';\nimport { findAndReplace } from 'mdast-util-find-and-replace';\nimport RootReactMarkdown from 'react-markdown';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport uniqBy from 'lodash.uniqby';\nexport var isOnlyEmojis = function (text) {\n    if (!text)\n        return false;\n    var noEmojis = text.replace(emojiRegex(), '');\n    var noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\n    return !noSpace;\n};\nvar allowedMarkups = [\n    'html',\n    // @ts-expect-error\n    'root',\n    'text',\n    'break',\n    'paragraph',\n    'emphasis',\n    'strong',\n    'link',\n    'list',\n    'listItem',\n    'code',\n    'inlineCode',\n    'blockquote',\n    'delete',\n];\nexport var matchMarkdownLinks = function (message) {\n    var regexMdLinks = /\\[([^[]+)\\](\\(.*\\))/gm;\n    var matches = message.match(regexMdLinks);\n    var singleMatch = /\\[([^[]+)\\]\\((.*)\\)/;\n    var links = matches\n        ? matches.map(function (match) {\n            var i = singleMatch.exec(match);\n            return i && [i[1], i[2]];\n        })\n        : [];\n    return links.flat();\n};\nexport var messageCodeBlocks = function (message) {\n    var codeRegex = /```[a-z]*\\n[\\s\\S]*?\\n```|`[a-z]*[\\s\\S]*?`/gm;\n    var matches = message.match(codeRegex);\n    return matches || [];\n};\nvar detectHttp = /(http(s?):\\/\\/)?(www\\.)?/;\nfunction formatUrlForDisplay(url) {\n    try {\n        return decodeURIComponent(url).replace(detectHttp, '');\n    }\n    catch (e) {\n        return url;\n    }\n}\nfunction encodeDecode(url) {\n    try {\n        return encodeURI(decodeURIComponent(url));\n    }\n    catch (error) {\n        return url;\n    }\n}\nexport var markDownRenderers = {\n    // eslint-disable-next-line react/display-name\n    link: function (props) {\n        var children = props.children, href = props.href;\n        var isEmail = href === null || href === void 0 ? void 0 : href.startsWith('mailto:');\n        var isUrl = href === null || href === void 0 ? void 0 : href.startsWith('http');\n        if (!href || (!isEmail && !isUrl)) {\n            return children;\n        }\n        return (React.createElement(\"a\", { className: \"\" + (isUrl ? 'str-chat__message-url-link' : ''), href: href, rel: 'nofollow noreferrer noopener', target: '_blank' }, children));\n    },\n    span: 'span',\n};\nexport var emojiMarkdownPlugin = function () {\n    function replace(match) {\n        return {\n            children: [{ type: 'text', value: match }],\n            className: 'inline-text-emoji',\n            type: 'span',\n        };\n    }\n    var transform = function (markdownAST) {\n        findAndReplace(markdownAST, emojiRegex(), replace);\n        return markdownAST;\n    };\n    return transform;\n};\nexport var mentionsMarkdownPlugin = function (mentioned_users) { return function () {\n    var mentioned_usernames = mentioned_users\n        .map(function (user) { return user.name || user.id; })\n        .filter(Boolean)\n        .map(escapeRegExp);\n    function replace(match) {\n        var usernameOrId = match.replace('@', '');\n        var user = mentioned_users.find(function (_a) {\n            var id = _a.id, name = _a.name;\n            return name === usernameOrId || id === usernameOrId;\n        });\n        return {\n            children: [{ type: 'text', value: match }],\n            mentioned_user: user,\n            type: 'mention',\n        };\n    }\n    var transform = function (markdownAST) {\n        if (!mentioned_usernames.length) {\n            return markdownAST;\n        }\n        var mentionedUsersRegex = new RegExp(mentioned_usernames.map(function (username) { return \"@\" + username; }).join('|'), 'g');\n        findAndReplace(markdownAST, mentionedUsersRegex, replace);\n        return markdownAST;\n    };\n    return transform;\n}; };\nvar Mention = function (props) { return React.createElement(\"span\", { className: 'str-chat__message-mention' }, props.children); };\nexport var renderText = function (text, mentioned_users, options) {\n    if (options === void 0) { options = {}; }\n    // take the @ mentions and turn them into markdown?\n    // translate links\n    if (!text)\n        return null;\n    var newText = text;\n    var markdownLinks = matchMarkdownLinks(newText);\n    var codeBlocks = messageCodeBlocks(newText);\n    // extract all valid links/emails within text and replace it with proper markup\n    uniqBy(linkify.find(newText), 'value').forEach(function (_a) {\n        var href = _a.href, type = _a.type, value = _a.value;\n        var linkIsInBlock = codeBlocks.some(function (block) { return block === null || block === void 0 ? void 0 : block.includes(value); });\n        // check if message is already  markdown\n        var noParsingNeeded = markdownLinks &&\n            markdownLinks.filter(function (text) {\n                var strippedHref = href === null || href === void 0 ? void 0 : href.replace(detectHttp, '');\n                var strippedText = text === null || text === void 0 ? void 0 : text.replace(detectHttp, '');\n                if (!strippedHref || !strippedText)\n                    return false;\n                return strippedHref.includes(strippedText) || strippedText.includes(strippedHref);\n            });\n        if (noParsingNeeded.length > 0 || linkIsInBlock)\n            return;\n        try {\n            // special case for mentions:\n            // it could happen that a user's name matches with an e-mail format pattern.\n            // in that case, we check whether the found e-mail is actually a mention\n            // by naively checking for an existence of @ sign in front of it.\n            if (type === 'email' && mentioned_users) {\n                var emailMatchesWithName = mentioned_users.some(function (u) { return u.name === value; });\n                if (emailMatchesWithName) {\n                    newText = newText.replace(new RegExp(escapeRegExp(value), 'g'), function (match, position) {\n                        var isMention = newText.charAt(position - 1) === '@';\n                        // in case of mention, we leave the match in its original form,\n                        // and we let `mentionsMarkdownPlugin` to do its job\n                        return isMention ? match : \"[\" + match + \"](\" + encodeDecode(href) + \")\";\n                    });\n                    return;\n                }\n            }\n            var displayLink = type === 'email' ? value : formatUrlForDisplay(href);\n            newText = newText.replace(new RegExp(escapeRegExp(value), 'g'), \"[\" + displayLink + \"](\" + encodeDecode(href) + \")\");\n        }\n        catch (e) {\n            void e;\n        }\n    });\n    var plugins = [emojiMarkdownPlugin];\n    if (mentioned_users === null || mentioned_users === void 0 ? void 0 : mentioned_users.length) {\n        plugins.push(mentionsMarkdownPlugin(mentioned_users));\n    }\n    var renderers = __assign(__assign({ mention: Mention }, markDownRenderers), options.customMarkDownRenderers);\n    return (React.createElement(ReactMarkdown, { allowedTypes: allowedMarkups, escapeHtml: true, plugins: plugins, renderers: renderers, source: newText, transformLinkUri: function (uri) {\n            return uri.startsWith('app://') ? uri : RootReactMarkdown.uriTransformer(uri);\n        }, unwrapDisallowed: true }));\n};\nexport function escapeRegExp(text) {\n    return text.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, '\\\\$&');\n}\n/**\n * @deprecated will be removed in the next major release\n */\nexport var generateRandomId = nanoid;\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charAt#getting_whole_characters\nexport var getWholeChar = function (str, i) {\n    var code = str.charCodeAt(i);\n    if (Number.isNaN(code))\n        return '';\n    if (code < 0xd800 || code > 0xdfff)\n        return str.charAt(i);\n    if (0xd800 <= code && code <= 0xdbff) {\n        if (str.length <= i + 1) {\n            throw 'High surrogate without following low surrogate';\n        }\n        var next = str.charCodeAt(i + 1);\n        if (0xdc00 > next || next > 0xdfff) {\n            throw 'High surrogate without following low surrogate';\n        }\n        return str.charAt(i) + str.charAt(i + 1);\n    }\n    if (i === 0) {\n        throw 'Low surrogate without preceding high surrogate';\n    }\n    var prev = str.charCodeAt(i - 1);\n    if (0xd800 > prev || prev > 0xdbff) {\n        throw 'Low surrogate without preceding high surrogate';\n    }\n    return '';\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}