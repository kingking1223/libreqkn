{"ast":null,"code":"var _jsxFileName = \"/home/kingking/Documents/code/website/libreqkn/client/src/components/ChannelInner.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { MessageList, MessageInput, Thread, Window, useChannelActionContext, Avatar, useChannelStateContext, useChatContext } from 'stream-chat-react';\nimport { ChannelInfo } from '../assets';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GiphyContext = /*#__PURE__*/React.createContext({});\nconst ChannelInner = _ref => {\n  _s();\n  let {\n    setIsEditing\n  } = _ref;\n  const [giphyState, setGiphyState] = useState(false);\n  const {\n    sendMessage\n  } = useChannelActionContext();\n  const overrideSubmitHandler = message => {\n    var _message$parent;\n    let updatedMessage = {\n      attachments: message.attachments,\n      mentioned_users: message.mentioned_users,\n      parent_id: (_message$parent = message.parent) === null || _message$parent === void 0 ? void 0 : _message$parent.id,\n      parent: message.parent,\n      text: message.text\n    };\n    if (giphyState) {\n      updatedMessage = {\n        ...updatedMessage,\n        text: `/giphy ${message.text}`\n      };\n    }\n    if (sendMessage) {\n      sendMessage(updatedMessage);\n      setGiphyState(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(GiphyContext.Provider, {\n    value: {\n      giphyState,\n      setGiphyState\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Window, {\n        children: [/*#__PURE__*/_jsxDEV(TeamChannelHeader, {\n          setIsEditing: setIsEditing\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MessageList, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MessageInput, {\n          overrideSubmitHandler: overrideSubmitHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Thread, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n};\n_s(ChannelInner, \"fXTxSJzuuU6qWjEF6MAcQfEXamM=\", false, function () {\n  return [useChannelActionContext];\n});\n_c = ChannelInner;\nconst TeamChannelHeader = _ref2 => {\n  _s2();\n  let {\n    setIsEditing\n  } = _ref2;\n  const {\n    channel,\n    watcher_count\n  } = useChannelStateContext();\n  const {\n    client\n  } = useChatContext();\n  const MessagingHeader = () => {\n    const members = Object.values(channel.state.members).filter(_ref3 => {\n      let {\n        user\n      } = _ref3;\n      return user.id !== client.userID;\n    });\n    const additionalMembers = members.length - 3;\n    if (channel.type === 'messaging') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"team-channel-header__name-wrapper\",\n        children: [members.map((_ref4, i) => {\n          let {\n            user\n          } = _ref4;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"team-channel-header__name-multi\",\n            children: [/*#__PURE__*/_jsxDEV(Avatar, {\n              image: user.image,\n              name: user.fullName || user.id,\n              size: 32\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"team-channel-header__name user\",\n              children: user.fullName || user.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this);\n        }), additionalMembers > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"team-channel-header__name user\",\n          children: [\"and \", additionalMembers, \" more\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"team-channel-header__channel-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"team-channel-header__name\",\n        children: [\"# \", channel.data.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          display: 'flex'\n        },\n        onClick: () => setIsEditing(true),\n        children: /*#__PURE__*/_jsxDEV(ChannelInfo, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this);\n  };\n  const getWatcherText = watchers => {\n    if (!watchers) return 'No users online';\n    if (watchers === 1) return '1 user online';\n    return `${watchers} users online`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"team-channel-header__container\",\n    children: [/*#__PURE__*/_jsxDEV(MessagingHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"team-channel-header__right\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"team-channel-header__right-text\",\n        children: getWatcherText(watcher_count)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 7\n  }, this);\n};\n_s2(TeamChannelHeader, \"Tb4arasuDJW0BnLDUr6/wz198yQ=\", false, function () {\n  return [useChannelStateContext, useChatContext];\n});\n_c2 = TeamChannelHeader;\nexport default ChannelInner;\nvar _c, _c2;\n$RefreshReg$(_c, \"ChannelInner\");\n$RefreshReg$(_c2, \"TeamChannelHeader\");","map":{"version":3,"names":["React","useState","MessageList","MessageInput","Thread","Window","useChannelActionContext","Avatar","useChannelStateContext","useChatContext","ChannelInfo","GiphyContext","createContext","ChannelInner","setIsEditing","giphyState","setGiphyState","sendMessage","overrideSubmitHandler","message","updatedMessage","attachments","mentioned_users","parent_id","parent","id","text","display","width","TeamChannelHeader","channel","watcher_count","client","MessagingHeader","members","Object","values","state","filter","user","userID","additionalMembers","length","type","map","i","image","fullName","data","name","getWatcherText","watchers"],"sources":["/home/kingking/Documents/code/website/libreqkn/client/src/components/ChannelInner.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { MessageList, MessageInput, Thread, Window, useChannelActionContext, Avatar, useChannelStateContext, useChatContext } from 'stream-chat-react';\n\nimport { ChannelInfo } from '../assets';\n\nexport const GiphyContext = React.createContext({});\n\nconst ChannelInner = ({ setIsEditing }) => {\n  const [giphyState, setGiphyState] = useState(false);\n  const { sendMessage } = useChannelActionContext();\n  \n  const overrideSubmitHandler = (message) => {\n    let updatedMessage = {\n      attachments: message.attachments,\n      mentioned_users: message.mentioned_users,\n      parent_id: message.parent?.id,\n      parent: message.parent,\n      text: message.text,\n    };\n    \n    if (giphyState) {\n      updatedMessage = { ...updatedMessage, text: `/giphy ${message.text}` };\n    }\n    \n    if (sendMessage) {\n      sendMessage(updatedMessage);\n      setGiphyState(false);\n    }\n  };\n\n  return (\n    <GiphyContext.Provider value={{ giphyState, setGiphyState }}>\n      <div style={{ display: 'flex', width: '100%' }}>\n        <Window>\n          <TeamChannelHeader setIsEditing={setIsEditing} />\n          <MessageList />\n          <MessageInput overrideSubmitHandler={overrideSubmitHandler} />\n        </Window>\n        <Thread />\n      </div>\n    </GiphyContext.Provider>\n  );\n};\n\nconst TeamChannelHeader = ({ setIsEditing }) => {\n    const { channel, watcher_count } = useChannelStateContext();\n    const { client } = useChatContext();\n  \n    const MessagingHeader = () => {\n      const members = Object.values(channel.state.members).filter(({ user }) => user.id !== client.userID);\n      const additionalMembers = members.length - 3;\n  \n      if(channel.type === 'messaging') {\n        return (\n          <div className='team-channel-header__name-wrapper'>\n            {members.map(({ user }, i) => (\n              <div key={i} className='team-channel-header__name-multi'>\n                <Avatar image={user.image} name={user.fullName || user.id} size={32} />\n                <p className='team-channel-header__name user'>{user.fullName || user.id}</p>\n              </div>\n            ))}\n  \n            {additionalMembers > 0 && <p className='team-channel-header__name user'>and {additionalMembers} more</p>}\n          </div>\n        );\n      }\n  \n      return (\n        <div className='team-channel-header__channel-wrapper'>\n          <p className='team-channel-header__name'># {channel.data.name}</p>\n          <span style={{ display: 'flex' }} onClick={() => setIsEditing(true)}>\n            <ChannelInfo />\n          </span>\n        </div>\n      );\n    };\n  \n    const getWatcherText = (watchers) => {\n      if (!watchers) return 'No users online';\n      if (watchers === 1) return '1 user online';\n      return `${watchers} users online`;\n    };\n  \n    return (\n      <div className='team-channel-header__container'>\n        <MessagingHeader />\n        <div className='team-channel-header__right'>\n          <p className='team-channel-header__right-text'>{getWatcherText(watcher_count)}</p>\n        </div>\n      </div>\n    );\n  };\n\n  export default ChannelInner;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}